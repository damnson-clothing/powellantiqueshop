import{e as f,c as d,a as e,l as x,g as l,t as b,k as w,m as p,v as c,q as g,d as v,j as i,o as u,p as _}from"./sYomq8En.js";import{u as k}from"./BLuIqXvH.js";const S={class:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},h={class:"max-w-md w-full space-y-8"},P={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},V={class:"rounded-md shadow-sm space-y-4"},I=["disabled"],N={key:0},T={key:1},C=f({__name:"login",setup(U){const n=i(""),o=i(""),r=i(!1),a=i(""),y=async()=>{r.value=!0,a.value="";try{const{data:t,error:s}=await k("/api/auth/login",{method:"POST",body:{username:n.value,password:o.value}},"$kObuGCeu14");if(s.value){a.value=s.value.data?.message||"Login failed. Please try again.",r.value=!1;return}t.value&&t.value.success?(localStorage.setItem("admin_token",t.value.token),localStorage.setItem("admin_user",JSON.stringify(t.value.admin)),await _("/admin")):a.value="Invalid credentials"}catch(t){console.error("Login error:",t),a.value="An error occurred. Please try again."}finally{r.value=!1}};return(t,s)=>(u(),d("div",S,[e("div",h,[s[5]||(s[5]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-serif font-bold text-gray-900"}," Powell's Admin Panel "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Sign in to manage your store ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:x(y,["prevent"])},[l(a)?(u(),d("div",P,b(l(a)),1)):w("",!0),e("div",V,[e("div",null,[s[2]||(s[2]=e("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-1"}," Username ",-1)),p(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=m=>g(n)?n.value=m:null),name:"username",type:"text",required:"",class:"input",placeholder:"Enter username"},null,512),[[c,l(n)]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Password ",-1)),p(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=m=>g(o)?o.value=m:null),name:"password",type:"password",required:"",class:"input",placeholder:"Enter password"},null,512),[[c,l(o)]])])]),e("div",null,[e("button",{type:"submit",disabled:l(r),class:"w-full btn btn-primary py-3 text-lg"},[l(r)?(u(),d("span",N,"Signing in...")):(u(),d("span",T,"Sign In"))],8,I)]),s[4]||(s[4]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded p-4"},[e("p",{class:"text-xs text-yellow-800"},[e("strong",null,"Default credentials:"),e("br"),v(" Username: admin"),e("br"),v(" Password: admin123 ")])],-1))],32)])]))}});export{C as default};
