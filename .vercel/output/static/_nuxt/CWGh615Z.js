import{_ as B}from"./DTawXRPS.js";import{e as E,x as S,n as j,B as q,f as M,z as N,w as y,_ as $,j as m,o as l,a as t,b as w,d as k,g as s,c as d,t as f,l as L,m as i,v as u,s as h,F as T,r as D,C as F,q as G}from"./sYomq8En.js";const R={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},_={class:"mb-8"},H={key:0,class:"text-center py-12"},z={key:1,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-red-700"},J={class:"space-y-6"},K={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},O=["value"],Q={class:"space-y-6"},W={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},X={class:"sm:col-span-2"},Y={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Z={class:"flex items-center"},ee={class:"flex items-center"},te={class:"space-y-6"},se={class:"mt-2 text-xs text-gray-500"},oe={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},re=["disabled"],ae={key:0},ie={key:1},me=E({__name:"[id]",setup(le){const V=S(),U=j(),b=V.params.id,x=m([]),g=m(!0),n=m(null),c=m(!1),a=m({name:"",description:"",price:0,categoryId:"",condition:"Excellent",material:"",history:"",images:[],isAvailable:!0,isFeatured:!1}),p=m("");q(p,o=>{a.value.images=o.split(`
`).map(e=>e.trim()).filter(e=>e.length>0)});const P=async()=>{try{g.value=!0,n.value=null;const o=await $fetch(`/api/admin/products/${b}`);a.value={name:o.name,description:o.description,price:o.price,categoryId:o.categoryId,condition:o.condition||"Excellent",material:o.material||"",history:o.history||"",images:o.images||[],isAvailable:o.isAvailable!==void 0?o.isAvailable:!0,isFeatured:o.isFeatured||!1},p.value=o.images.join(`
`)}catch(o){n.value=o.message||"Failed to load product"}finally{g.value=!1}},I=async()=>{try{const o=await $fetch("/api/categories");x.value=o}catch(o){console.error("Failed to load categories:",o)}},A=async()=>{try{c.value=!0,n.value=null,await $fetch(`/api/admin/products/${b}`,{method:"PUT",body:a.value}),alert("Product updated successfully!"),U.push("/admin/products")}catch(o){n.value=o.data?.message||o.message||"Failed to update product"}finally{c.value=!1}};return M(()=>{P(),I()}),(o,e)=>{const v=B,C=$;return l(),N(C,{name:"admin"},{default:y(()=>[t("div",R,[t("div",_,[w(v,{to:"/admin/products",class:"text-sm text-primary-600 hover:text-primary-700 mb-4 inline-block"},{default:y(()=>[...e[10]||(e[10]=[k(" â† Back to Products ",-1)])]),_:1}),e[11]||(e[11]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Product",-1)),e[12]||(e[12]=t("p",{class:"mt-2 text-sm text-gray-700"},"Update product information",-1))]),s(g)?(l(),d("div",H,[...e[13]||(e[13]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-200 border-t-primary-600"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading product...",-1)])])):s(n)?(l(),d("div",z,f(s(n)),1)):(l(),d("form",{key:2,onSubmit:L(A,["prevent"]),class:"space-y-8 bg-white shadow sm:rounded-lg p-6"},[t("div",J,[e[21]||(e[21]=t("h2",{class:"text-lg font-medium text-gray-900"},"Basic Information",-1)),t("div",null,[e[14]||(e[14]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Product Name *",-1)),i(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=r=>s(a).name=r),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[u,s(a).name]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description *",-1)),i(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=r=>s(a).description=r),rows:"4",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[u,s(a).description]])]),t("div",K,[t("div",null,[e[16]||(e[16]=t("label",{for:"price",class:"block text-sm font-medium text-gray-700"},"Price ($) *",-1)),i(t("input",{id:"price","onUpdate:modelValue":e[2]||(e[2]=r=>s(a).price=r),type:"number",step:"0.01",min:"0",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[u,s(a).price,void 0,{number:!0}]])]),t("div",null,[e[18]||(e[18]=t("label",{for:"condition",class:"block text-sm font-medium text-gray-700"},"Condition *",-1)),i(t("select",{id:"condition","onUpdate:modelValue":e[3]||(e[3]=r=>s(a).condition=r),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[...e[17]||(e[17]=[t("option",{value:"Excellent"},"Excellent",-1),t("option",{value:"Very Good"},"Very Good",-1),t("option",{value:"Good"},"Good",-1),t("option",{value:"Fair"},"Fair",-1)])],512),[[h,s(a).condition]])])]),t("div",null,[e[20]||(e[20]=t("label",{for:"categoryId",class:"block text-sm font-medium text-gray-700"},"Category *",-1)),i(t("select",{id:"categoryId","onUpdate:modelValue":e[4]||(e[4]=r=>s(a).categoryId=r),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[e[19]||(e[19]=t("option",{value:""},"Select a category",-1)),(l(!0),d(T,null,D(s(x),r=>(l(),d("option",{key:r.id,value:r.id},f(r.name),9,O))),128))],512),[[h,s(a).categoryId]])])]),t("div",Q,[e[26]||(e[26]=t("h2",{class:"text-lg font-medium text-gray-900"},"Product Details",-1)),t("div",W,[t("div",null,[e[22]||(e[22]=t("label",{for:"material",class:"block text-sm font-medium text-gray-700"},"Material",-1)),i(t("input",{id:"material","onUpdate:modelValue":e[5]||(e[5]=r=>s(a).material=r),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[u,s(a).material]])]),t("div",X,[e[23]||(e[23]=t("label",{for:"history",class:"block text-sm font-medium text-gray-700"},"History / Provenance",-1)),i(t("textarea",{id:"history","onUpdate:modelValue":e[6]||(e[6]=r=>s(a).history=r),rows:"3",placeholder:"Historical information about this item...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[u,s(a).history]])])]),t("div",Y,[t("div",Z,[i(t("input",{id:"isAvailable","onUpdate:modelValue":e[7]||(e[7]=r=>s(a).isAvailable=r),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[F,s(a).isAvailable]]),e[24]||(e[24]=t("label",{for:"isAvailable",class:"ml-2 block text-sm text-gray-900"}," Available for Purchase ",-1))]),t("div",ee,[i(t("input",{id:"isFeatured","onUpdate:modelValue":e[8]||(e[8]=r=>s(a).isFeatured=r),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[F,s(a).isFeatured]]),e[25]||(e[25]=t("label",{for:"isFeatured",class:"ml-2 block text-sm text-gray-900"}," Featured Product ",-1))])])]),t("div",te,[e[27]||(e[27]=t("h2",{class:"text-lg font-medium text-gray-900"},"Images",-1)),e[28]||(e[28]=t("p",{class:"text-sm text-gray-500"},"Enter image URLs (one per line). The first image will be the main product image.",-1)),t("div",null,[i(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=r=>G(p)?p.value=r:null),rows:"4",placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm font-mono text-xs"},null,512),[[u,s(p)]]),t("p",se,f(s(a).images.length)+" image(s) added ",1)])]),t("div",oe,[w(v,{to:"/admin/products",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},{default:y(()=>[...e[29]||(e[29]=[k(" Cancel ",-1)])]),_:1}),t("button",{type:"submit",disabled:s(c),class:"inline-flex justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[s(c)?(l(),d("span",ae,"Saving...")):(l(),d("span",ie,"Save Changes"))],8,re)])],32))])]),_:1})}}});export{me as default};
