import{_ as P}from"./DaRMw0Ry.js";import{e as S,x as D,f as O,z as L,w as f,_ as I,j as u,o as l,a as t,b as j,d as A,g as s,c as n,t as r,y as _,m as B,q as F,s as M,k as b,F as v,r as h}from"./6JbxToWv.js";const H={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},T={class:"mb-8"},U={key:0,class:"text-center py-12"},V={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700"},$={key:2,class:"space-y-6"},z={class:"bg-white shadow rounded-lg p-6"},G={class:"flex items-center justify-between mb-4"},R={class:"text-2xl font-bold text-gray-900"},q={class:"text-sm text-gray-500 mt-1"},Q={class:"mt-6 pt-6 border-t border-gray-200"},J={class:"flex items-center space-x-3"},K=["disabled"],W={class:"bg-white shadow rounded-lg p-6"},X={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Y={class:"mt-1 text-sm text-gray-900"},Z={class:"mt-1 text-sm text-gray-900"},tt={class:"mt-1 text-sm text-gray-900"},et={class:"sm:col-span-2"},st={class:"mt-1 text-sm text-gray-900 whitespace-pre-line"},ot={key:0,class:"sm:col-span-2"},rt={class:"mt-1 text-sm text-gray-900"},at={class:"bg-white shadow rounded-lg p-6"},dt={class:"space-y-4"},lt=["src","alt"],nt={key:1,class:"h-16 w-16 rounded bg-gray-200 flex items-center justify-center"},it={class:"flex-1"},ut={class:"text-sm font-medium text-gray-900"},ct={class:"text-sm text-gray-500"},mt={class:"text-right"},xt={class:"text-sm font-medium text-gray-900"},pt={class:"mt-6 pt-6 border-t border-gray-200"},gt={class:"flex justify-between text-base font-medium text-gray-900"},yt={class:"text-2xl"},ft={class:"bg-white shadow rounded-lg p-6"},_t={class:"flow-root"},bt={class:"-mb-8"},vt={class:"relative pb-8"},ht={key:0,class:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},wt={class:"relative flex space-x-3"},Nt={class:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5"},kt={class:"text-sm text-gray-900 font-medium"},Ct={class:"whitespace-nowrap text-right text-sm text-gray-500"},Ot=S({__name:"[id]",setup(Et){const p=D().params.id,o=u(null),x=u(!0),c=u(null),i=u(""),m=u(!1),g=d=>({PENDING:"bg-yellow-100 text-yellow-800",PROCESSING:"bg-blue-100 text-blue-800",SHIPPED:"bg-purple-100 text-purple-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[d]||"bg-gray-100 text-gray-800",y=d=>{const e=new Date(d);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(e)},w=async()=>{try{x.value=!0,c.value=null;const d=await $fetch(`/api/admin/orders/${p}`);o.value=d,i.value=d.status}catch(d){c.value=d.message||"Failed to load order"}finally{x.value=!1}},N=async()=>{if(i.value!==o.value.status)try{m.value=!0;const d=await $fetch(`/api/admin/orders/${p}`,{method:"PUT",body:{status:i.value}});o.value=d,alert("Order status updated successfully!")}catch(d){alert(d.message||"Failed to update order status"),i.value=o.value.status}finally{m.value=!1}};return O(()=>{w()}),(d,e)=>{const k=P,C=I;return l(),L(C,{name:"admin"},{default:f(()=>[t("div",H,[t("div",T,[j(k,{to:"/admin/orders",class:"text-sm text-primary-600 hover:text-primary-700 mb-4 inline-block"},{default:f(()=>[...e[1]||(e[1]=[A(" ← Back to Orders ",-1)])]),_:1}),e[2]||(e[2]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Order Details",-1))]),s(x)?(l(),n("div",U,[...e[3]||(e[3]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-200 border-t-primary-600"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading order...",-1)])])):s(c)?(l(),n("div",V,r(s(c)),1)):(l(),n("div",$,[t("div",z,[t("div",G,[t("div",null,[t("h2",R,"Order #"+r(s(o).orderNumber),1),t("p",q,"Placed on "+r(y(s(o).createdAt)),1)]),t("span",{class:_(["px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full",g(s(o).status)])},r(s(o).status),3)]),t("div",Q,[e[5]||(e[5]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"},"Update Order Status",-1)),t("div",J,[B(t("select",{id:"status","onUpdate:modelValue":e[0]||(e[0]=a=>F(i)?i.value=a:null),class:"block w-64 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[...e[4]||(e[4]=[t("option",{value:"PENDING"},"Pending",-1),t("option",{value:"PROCESSING"},"Processing",-1),t("option",{value:"SHIPPED"},"Shipped",-1),t("option",{value:"COMPLETED"},"Completed",-1),t("option",{value:"CANCELLED"},"Cancelled",-1)])],512),[[M,s(i)]]),t("button",{onClick:N,disabled:s(m)||s(i)===s(o).status,class:"inline-flex justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},r(s(m)?"Updating...":"Update Status"),9,K)])])]),t("div",W,[e[11]||(e[11]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Customer Information",-1)),t("dl",X,[t("div",null,[e[6]||(e[6]=t("dt",{class:"text-sm font-medium text-gray-500"},"Name",-1)),t("dd",Y,r(s(o).customerName),1)]),t("div",null,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("dd",Z,r(s(o).customerEmail),1)]),t("div",null,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"Phone",-1)),t("dd",tt,r(s(o).customerPhone||"N/A"),1)]),t("div",et,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500"},"Shipping Address",-1)),t("dd",st,r(s(o).shippingAddress),1)]),s(o).orderNotes?(l(),n("div",ot,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500"},"Order Notes",-1)),t("dd",rt,r(s(o).orderNotes),1)])):b("",!0)])]),t("div",at,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Order Items",-1)),t("div",dt,[(l(!0),n(v,null,h(s(o).items,a=>(l(),n("div",{key:a.id,class:"flex items-center space-x-4 py-4 border-b border-gray-200 last:border-b-0"},[a.product?.images?.[0]?(l(),n("img",{key:0,src:a.product.images[0],alt:a.productName,class:"h-16 w-16 rounded object-cover"},null,8,lt)):(l(),n("div",nt,[...e[12]||(e[12]=[t("svg",{class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),t("div",it,[t("h4",ut,r(a.productName),1),t("p",ct,"Quantity: "+r(a.quantity),1)]),t("div",mt,[t("p",xt,"₱"+r(Number(a.productPrice).toFixed(2)),1),e[13]||(e[13]=t("p",{class:"text-xs text-gray-500"},"each",-1))])]))),128))]),t("div",pt,[t("div",gt,[e[14]||(e[14]=t("p",null,"Total",-1)),t("p",yt,"₱"+r(Number(s(o).total).toFixed(2)),1)])])]),t("div",ft,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Order History",-1)),t("div",_t,[t("ul",bt,[(l(!0),n(v,null,h(s(o).statusHistory,(a,E)=>(l(),n("li",{key:a.id},[t("div",vt,[E!==s(o).statusHistory.length-1?(l(),n("span",ht)):b("",!0),t("div",wt,[t("div",null,[t("span",{class:_(["h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white",g(a.status).replace("text-","bg-").split(" ")[0]])},[...e[16]||(e[16]=[t("svg",{class:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],2)]),t("div",Nt,[t("div",null,[t("p",kt,"Status changed to "+r(a.status),1)]),t("div",Ct,[t("time",null,r(y(a.createdAt)),1)])])])])]))),128))])])])]))])]),_:1})}}});export{Ot as default};
