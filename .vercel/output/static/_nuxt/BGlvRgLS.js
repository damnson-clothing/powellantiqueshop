import{_ as $}from"./DTawXRPS.js";import{u as I}from"./BVTuAaQv.js";import{e as z,x as P,u as B,f as V,c as l,g as o,a as t,b as u,w as m,t as n,F as w,r as C,k as c,d as g,p as q,j as p,o as a,y as F}from"./sYomq8En.js";import{u as L}from"./BLuIqXvH.js";const H={class:"container-custom py-8"},A={key:0,class:"text-center py-12"},E={key:1,class:"text-center py-12"},T={key:2},D={class:"text-sm text-gray-500 mb-6"},O={class:"text-gray-900"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12"},Y={class:"bg-gray-100 rounded-lg overflow-hidden mb-4 aspect-square"},G=["src","alt"],J={key:0,class:"grid grid-cols-4 gap-2"},R=["onClick"],W=["src","alt"],K={class:"mb-3"},U={class:"inline-block bg-primary-100 text-primary-800 text-xs font-semibold px-3 py-1 rounded-full"},X={class:"text-3xl lg:text-4xl font-serif font-bold text-gray-900 mb-4"},Z={class:"flex items-center justify-between mb-6 pb-6 border-b"},tt={class:"text-4xl font-bold text-primary-600"},et={class:"text-right"},st={class:"text-lg font-semibold text-gray-900"},ot={class:"mb-6"},lt={key:0,class:"flex items-center text-green-600"},at={key:1,class:"flex items-center text-red-600"},rt={key:1,disabled:"",class:"w-full btn bg-gray-300 text-gray-500 cursor-not-allowed py-4 text-lg mb-4"},nt={key:2,class:"bg-gray-50 rounded-lg p-4 mb-6"},it={class:"text-gray-900"},dt={class:"mb-6"},ct={class:"text-gray-700 leading-relaxed whitespace-pre-line"},ut={key:3,class:"bg-secondary-50 rounded-lg p-6 mb-6"},mt={class:"text-gray-700 leading-relaxed whitespace-pre-line"},gt={class:"border-t pt-6"},pt={key:0,class:"mt-16"},ft={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6"},vt={class:"aspect-square bg-gray-200 overflow-hidden"},xt=["src","alt"],bt={class:"p-4"},yt={class:"font-serif font-bold text-lg mb-2 line-clamp-2"},_t={class:"flex items-center justify-between"},ht={class:"text-primary-600 font-bold"},kt={class:"text-xs text-gray-500"},wt=["src","alt"],It=z({__name:"[slug]",setup(Ct){const M=P().params.slug,s=p(null),v=p([]),b=p(!0),x=p(!1),f=p(""),y=p(!1),_=i=>new Intl.NumberFormat("en-PH").format(Number(i)),j=()=>{const e=I().addItem(s.value);e.success?confirm(`"${s.value.name}" added to cart!

Go to cart now?`)&&q("/cart"):alert(e.message)},N=()=>{y.value=!0},h=()=>{y.value=!1},S=async()=>{b.value=!0,x.value=!1;try{const{data:i,error:e}=await L(`/api/products/${M}`,"$r-9NeCErdo");if(e.value||!i.value){x.value=!0;return}if(s.value=i.value,f.value=s.value.images[0]||"",s.value.category){const{data:d}=await L("/api/products",{query:{category:s.value.category.slug,limit:4}},"$WiJSfkYQvv");v.value=(d.value?.products||[]).filter(r=>r.id!==s.value.id).slice(0,4)}}catch(i){console.error("Error fetching product:",i),x.value=!0}finally{b.value=!1}};return B(()=>({title:s.value?`${s.value.name} | Powell's Antique Shop`:"Loading...",meta:[{name:"description",content:s.value?.description||"Vintage bags and collectibles"}]})),V(()=>{S()}),(i,e)=>{const d=$;return a(),l("div",H,[o(b)?(a(),l("div",A,[...e[0]||(e[0]=[t("p",{class:"text-gray-500"},"Loading product details...",-1)])])):o(x)?(a(),l("div",E,[e[2]||(e[2]=t("h2",{class:"text-2xl font-bold text-red-600 mb-4"},"Product Not Found",-1)),e[3]||(e[3]=t("p",{class:"text-gray-600 mb-6"},"The product you're looking for doesn't exist or has been removed.",-1)),u(d,{to:"/products",class:"btn btn-primary"},{default:m(()=>[...e[1]||(e[1]=[g(" Back to Products ",-1)])]),_:1})])):o(s)?(a(),l("div",T,[t("nav",D,[u(d,{to:"/",class:"hover:text-primary-600"},{default:m(()=>[...e[4]||(e[4]=[g("Home",-1)])]),_:1}),e[6]||(e[6]=t("span",{class:"mx-2"},"/",-1)),u(d,{to:"/products",class:"hover:text-primary-600"},{default:m(()=>[...e[5]||(e[5]=[g("Products",-1)])]),_:1}),e[7]||(e[7]=t("span",{class:"mx-2"},"/",-1)),u(d,{to:`/products?category=${o(s).category.slug}`,class:"hover:text-primary-600"},{default:m(()=>[g(n(o(s).category.name),1)]),_:1},8,["to"]),e[8]||(e[8]=t("span",{class:"mx-2"},"/",-1)),t("span",O,n(o(s).name),1)]),t("div",Q,[t("div",null,[t("div",Y,[t("img",{src:o(f)||o(s).images[0]||"/placeholder-product.jpg",alt:o(s).name,class:"w-full h-full object-cover cursor-zoom-in hover:scale-105 transition duration-300",onClick:N},null,8,G)]),o(s).images&&o(s).images.length>1?(a(),l("div",J,[(a(!0),l(w,null,C(o(s).images,(r,k)=>(a(),l("div",{key:k,class:F(["aspect-square bg-gray-100 rounded overflow-hidden cursor-pointer border-2 transition",o(f)===r?"border-primary-600":"border-transparent hover:border-gray-300"]),onClick:Mt=>f.value=r},[t("img",{src:r,alt:`${o(s).name} ${Number(k)+1}`,class:"w-full h-full object-cover"},null,8,W)],10,R))),128))])):c("",!0)]),t("div",null,[t("div",K,[t("span",U,n(o(s).category.name),1)]),t("h1",X,n(o(s).name),1),t("div",Z,[t("div",null,[t("p",tt,"₱"+n(_(o(s).price)),1)]),t("div",et,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500"},"Condition",-1)),t("p",st,n(o(s).condition),1)])]),t("div",ot,[o(s).isAvailable?(a(),l("div",lt,[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),t("span",{class:"font-semibold"},"In Stock",-1)])])):(a(),l("div",at,[...e[11]||(e[11]=[t("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),t("span",{class:"font-semibold"},"Sold Out",-1)])]))]),o(s).isAvailable?(a(),l("button",{key:0,onClick:j,class:"w-full btn btn-primary py-4 text-lg mb-4"},[...e[12]||(e[12]=[t("svg",{class:"w-6 h-6 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1),g(" Add to Cart ",-1)])])):(a(),l("button",rt," Sold Out ")),o(s).material?(a(),l("div",nt,[e[13]||(e[13]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-1"},"Material",-1)),t("p",it,n(o(s).material),1)])):c("",!0),t("div",dt,[e[14]||(e[14]=t("h2",{class:"text-xl font-serif font-bold mb-3"},"Description",-1)),t("p",ct,n(o(s).description),1)]),o(s).history?(a(),l("div",ut,[e[15]||(e[15]=t("h2",{class:"text-xl font-serif font-bold mb-3"},"Item History",-1)),t("p",mt,n(o(s).history),1)])):c("",!0),t("div",gt,[e[17]||(e[17]=t("p",{class:"text-sm text-gray-600 mb-2"},"Questions about this item?",-1)),u(d,{to:"/contact",class:"text-primary-600 hover:text-primary-700 font-semibold"},{default:m(()=>[...e[16]||(e[16]=[g(" Contact us → ",-1)])]),_:1})])])]),o(v)&&o(v).length>0?(a(),l("div",pt,[e[18]||(e[18]=t("h2",{class:"text-2xl font-serif font-bold mb-6"},"Similar Items You May Like",-1)),t("div",ft,[(a(!0),l(w,null,C(o(v),r=>(a(),l("div",{key:r.id,class:"card hover:shadow-xl transition"},[u(d,{to:`/products/${r.slug}`},{default:m(()=>[t("div",vt,[r.images&&r.images[0]?(a(),l("img",{key:0,src:r.images[0],alt:r.name,class:"w-full h-full object-cover hover:scale-105 transition duration-300"},null,8,xt)):c("",!0)]),t("div",bt,[t("h3",yt,n(r.name),1),t("div",_t,[t("span",ht,"₱"+n(_(r.price)),1),t("span",kt,n(r.condition),1)])])]),_:2},1032,["to"])]))),128))])])):c("",!0)])):c("",!0),o(y)?(a(),l("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:h},[t("button",{class:"absolute top-4 right-4 text-white text-4xl hover:text-gray-300",onClick:h}," × "),t("img",{src:o(f)||o(s).images[0],alt:o(s).name,class:"max-w-full max-h-full object-contain"},null,8,wt)])):c("",!0)])}}});export{It as default};
