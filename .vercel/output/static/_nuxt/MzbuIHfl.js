import{e as y,c as d,a as e,l as x,g as r,t as b,k as w,m as p,v as c,q as v,d as f,j as i,o as u,p as _}from"./6JbxToWv.js";import{u as k}from"./BRrJ57S3.js";const h={class:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},S={class:"max-w-md w-full space-y-8"},P={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},V={class:"rounded-md shadow-sm space-y-4"},N=["disabled"],T={key:0},U={key:1},D=y({__name:"login",setup(q){const n=i(""),o=i(""),l=i(!1),t=i(""),g=async()=>{l.value=!0,t.value="";try{const{data:a,error:s}=await k("/api/auth/login",{method:"POST",body:{username:n.value,password:o.value}},"$kObuGCeu14");if(s.value){t.value=s.value.data?.message||"Login failed. Please try again.",l.value=!1;return}a.value&&a.value.success?(a.value.admin&&localStorage.setItem("admin_user",JSON.stringify(a.value.admin)),await _("/admin")):t.value="Invalid credentials"}catch(a){console.error("Login error:",a),t.value="An error occurred. Please try again."}finally{l.value=!1}};return(a,s)=>(u(),d("div",h,[e("div",S,[s[5]||(s[5]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-serif font-bold text-gray-900"}," Powell's Admin Panel "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Sign in to manage your store ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:x(g,["prevent"])},[r(t)?(u(),d("div",P,b(r(t)),1)):w("",!0),e("div",V,[e("div",null,[s[2]||(s[2]=e("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-1"}," Username ",-1)),p(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=m=>v(n)?n.value=m:null),name:"username",type:"text",required:"",class:"input",placeholder:"Enter username"},null,512),[[c,r(n)]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Password ",-1)),p(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=m=>v(o)?o.value=m:null),name:"password",type:"password",required:"",class:"input",placeholder:"Enter password"},null,512),[[c,r(o)]])])]),e("div",null,[e("button",{type:"submit",disabled:r(l),class:"w-full btn btn-primary py-3 text-lg"},[r(l)?(u(),d("span",T,"Signing in...")):(u(),d("span",U,"Sign In"))],8,N)]),s[4]||(s[4]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded p-4"},[e("p",{class:"text-xs text-yellow-800"},[e("strong",null,"Default credentials:"),e("br"),f(" Username: admin"),e("br"),f(" Password: admin123 ")])],-1))],32)])]))}});export{D as default};
