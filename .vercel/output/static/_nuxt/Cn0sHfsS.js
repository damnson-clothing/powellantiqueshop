import{_ as j}from"./DTawXRPS.js";import{e as I,f as B,c as n,a as e,m as x,v as h,g as l,q as f,s as C,F as V,r as N,i as G,t as u,k as F,j as r,o as i,b as L,w as q}from"./sYomq8En.js";import{u as M}from"./BLuIqXvH.js";const A={class:"container-custom py-12"},D={class:"mb-8 bg-white p-6 rounded-lg shadow"},H={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},O={class:"md:col-span-2"},Q=["value"],R={class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},W={key:0,class:"text-center py-12"},Y={key:1,class:"text-center py-12"},z={key:2},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},K={class:"aspect-square bg-gray-200 overflow-hidden"},X=["src","alt"],Z={class:"p-4"},ee={class:"text-xs text-primary-600 mb-1"},te={class:"font-serif font-bold text-lg mb-2"},se={class:"text-gray-600 text-sm mb-2 line-clamp-2"},oe={class:"flex items-center justify-between"},le={class:"text-primary-600 font-bold text-xl"},ae={class:"text-sm text-gray-500"},ne={key:0,class:"mt-8 flex justify-center items-center space-x-2"},ie=["disabled"],re={class:"text-gray-600"},ue=["disabled"],ve=I({__name:"index",setup(de){const y=r([]),P=r([]),_=r(!0),a=r({page:1,limit:12,total:0,totalPages:0}),d=r(""),c=r(""),p=r(""),m=r(null),v=r(null),T=o=>new Intl.NumberFormat("en-PH").format(Number(o)),g=async()=>{_.value=!0;try{const o={page:a.value.page,limit:a.value.limit};d.value&&(o.search=d.value),c.value&&(o.category=c.value),p.value&&(o.condition=p.value),m.value&&(o.minPrice=m.value),v.value&&(o.maxPrice=v.value);const{data:t}=await M("/api/products",{params:o},"$GvW4PmcPl1");y.value=t.value?.products||[],a.value=t.value?.pagination||a.value}catch(o){console.error("Error fetching products:",o)}finally{_.value=!1}},U=async()=>{try{const{data:o}=await M("/api/categories","$1cFUhxkxY9");P.value=o.value||[]}catch(o){console.error("Error fetching categories:",o)}};let k;const E=()=>{clearTimeout(k),k=setTimeout(()=>{a.value.page=1,g()},500)},b=()=>{a.value.page=1,g()},S=()=>{d.value="",c.value="",p.value="",m.value=null,v.value=null,a.value.page=1,g()},w=o=>{a.value.page=o,g(),window.scrollTo({top:0,behavior:"smooth"})};return B(()=>{U(),g()}),(o,t)=>{const $=j;return i(),n("div",A,[t[13]||(t[13]=e("h1",{class:"text-4xl font-serif font-bold mb-8"},"Our Products",-1)),e("div",D,[e("div",H,[e("div",O,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>f(d)?d.value=s:null),type:"text",placeholder:"Search products...",class:"input",onInput:E},null,544),[[h,l(d)]])]),e("div",null,[x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f(c)?c.value=s:null),class:"input",onChange:b},[t[7]||(t[7]=e("option",{value:""},"All Categories",-1)),(i(!0),n(V,null,N(l(P),s=>(i(),n("option",{key:s.id,value:s.slug},u(s.name),9,Q))),128))],544),[[C,l(c)]])]),e("div",null,[x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f(p)?p.value=s:null),class:"input",onChange:b},[...t[8]||(t[8]=[G('<option value="">All Conditions</option><option value="Excellent">Excellent</option><option value="Good">Good</option><option value="Fair">Fair</option><option value="Vintage">Vintage</option>',5)])],544),[[C,l(p)]])])]),e("div",R,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Min Price",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f(m)?m.value=s:null),type:"number",placeholder:"Min",class:"input",onInput:b},null,544),[[h,l(m),void 0,{number:!0}]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Max Price",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>f(v)?v.value=s:null),type:"number",placeholder:"Max",class:"input",onInput:b},null,544),[[h,l(v),void 0,{number:!0}]])])]),e("button",{onClick:S,class:"mt-4 text-sm text-primary-600 hover:text-primary-700"}," Clear all filters ")]),l(_)?(i(),n("div",W,[...t[11]||(t[11]=[e("p",{class:"text-gray-500"},"Loading products...",-1)])])):l(y).length===0?(i(),n("div",Y,[...t[12]||(t[12]=[e("p",{class:"text-gray-500"},"No products found.",-1)])])):(i(),n("div",z,[e("div",J,[(i(!0),n(V,null,N(l(y),s=>(i(),n("div",{key:s.id,class:"card hover:shadow-xl transition"},[L($,{to:`/products/${s.slug}`},{default:q(()=>[e("div",K,[s.images&&s.images[0]?(i(),n("img",{key:0,src:s.images[0],alt:s.name,class:"w-full h-full object-cover hover:scale-105 transition duration-300"},null,8,X)):F("",!0)]),e("div",Z,[e("div",ee,u(s.category.name),1),e("h3",te,u(s.name),1),e("p",se,u(s.description),1),e("div",oe,[e("span",le,"â‚±"+u(T(s.price)),1),e("span",ae,u(s.condition),1)])])]),_:2},1032,["to"])]))),128))]),l(a).totalPages>1?(i(),n("div",ne,[e("button",{onClick:t[5]||(t[5]=s=>w(l(a).page-1)),disabled:l(a).page===1,class:"btn btn-outline disabled:opacity-50"}," Previous ",8,ie),e("span",re," Page "+u(l(a).page)+" of "+u(l(a).totalPages),1),e("button",{onClick:t[6]||(t[6]=s=>w(l(a).page+1)),disabled:l(a).page===l(a).totalPages,class:"btn btn-outline disabled:opacity-50"}," Next ",8,ue)])):F("",!0)]))])}}});export{ve as default};
