import{_ as N}from"./DaRMw0Ry.js";import{e as $,n as j,B as q,f as L,z as S,w as b,_ as D,j as c,o as i,a as t,b as h,d as C,g as s,c as n,t as x,k as v,l as E,m as l,v as p,s as V,F,r as U,C as _,y as R,q as T}from"./6JbxToWv.js";const z={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={class:"mb-8"},H={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-red-700"},O={class:"space-y-6"},W={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},J=["value"],K={class:"space-y-6"},Q={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},X={class:"sm:col-span-2"},Y={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Z={class:"flex items-center"},ee={class:"flex items-center"},te={class:"space-y-6"},oe={class:"mb-4"},se={class:"mt-1 text-xs text-gray-500"},re={key:0,class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},ae=["src","alt"],ie={key:0,class:"absolute top-1 left-1 bg-primary-600 text-white text-xs px-2 py-1 rounded"},le=["onClick"],de={class:"mt-4"},ne={class:"mt-2"},me={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},ue=["disabled"],pe={key:0},ce={key:1},be=$({__name:"create",setup(ge){const P=j(),w=c([]),g=c(null),y=c(!1),r=c({name:"",description:"",price:0,categoryId:"",condition:"Excellent",material:"",history:"",images:[],isAvailable:!0,isFeatured:!1}),f=c("");q(f,a=>{r.value.images=a.split(`
`).map(e=>e.trim()).filter(e=>e.length>0)});const M=async()=>{try{const a=await $fetch("/api/categories");w.value=a}catch(a){console.error("Failed to load categories:",a)}},A=async()=>{try{y.value=!0,g.value=null,await $fetch("/api/admin/products",{method:"POST",body:r.value}),alert("Product created successfully!"),P.push("/admin/products")}catch(a){g.value=a.data?.message||a.message||"Failed to create product"}finally{y.value=!1}},B=async a=>{const e=a.target,u=e.files;if(!(!u||u.length===0)){try{for(const d of Array.from(u)){if(!d.type.startsWith("image/")){alert(`${d.name} is not an image file`);continue}if(d.size>2*1024*1024){alert(`${d.name} is too large. Maximum size is 2MB.`);continue}const o=new FileReader;o.onload=m=>{const k=m.target?.result;r.value.images.push(k)},o.readAsDataURL(d)}}catch(d){console.error("Error uploading images:",d),alert("Failed to upload images")}e.value=""}},I=a=>{r.value.images.splice(a,1)};return L(()=>{M()}),(a,e)=>{const u=N,d=D;return i(),S(d,{name:"admin"},{default:b(()=>[t("div",z,[t("div",G,[h(u,{to:"/admin/products",class:"text-sm text-primary-600 hover:text-primary-700 mb-4 inline-block"},{default:b(()=>[...e[10]||(e[10]=[C(" â† Back to Products ",-1)])]),_:1}),e[11]||(e[11]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Create New Product",-1)),e[12]||(e[12]=t("p",{class:"mt-2 text-sm text-gray-700"},"Add a new product to your inventory",-1))]),s(g)?(i(),n("div",H,x(s(g)),1)):v("",!0),t("form",{onSubmit:E(A,["prevent"]),class:"space-y-8 bg-white shadow sm:rounded-lg p-6"},[t("div",O,[e[20]||(e[20]=t("h2",{class:"text-lg font-medium text-gray-900"},"Basic Information",-1)),t("div",null,[e[13]||(e[13]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Product Name *",-1)),l(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>s(r).name=o),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[p,s(r).name]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description *",-1)),l(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>s(r).description=o),rows:"4",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[p,s(r).description]])]),t("div",W,[t("div",null,[e[15]||(e[15]=t("label",{for:"price",class:"block text-sm font-medium text-gray-700"},"Price ($) *",-1)),l(t("input",{id:"price","onUpdate:modelValue":e[2]||(e[2]=o=>s(r).price=o),type:"number",step:"0.01",min:"0",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[p,s(r).price,void 0,{number:!0}]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"condition",class:"block text-sm font-medium text-gray-700"},"Condition *",-1)),l(t("select",{id:"condition","onUpdate:modelValue":e[3]||(e[3]=o=>s(r).condition=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[...e[16]||(e[16]=[t("option",{value:"Excellent"},"Excellent",-1),t("option",{value:"Very Good"},"Very Good",-1),t("option",{value:"Good"},"Good",-1),t("option",{value:"Fair"},"Fair",-1)])],512),[[V,s(r).condition]])])]),t("div",null,[e[19]||(e[19]=t("label",{for:"categoryId",class:"block text-sm font-medium text-gray-700"},"Category *",-1)),l(t("select",{id:"categoryId","onUpdate:modelValue":e[4]||(e[4]=o=>s(r).categoryId=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[e[18]||(e[18]=t("option",{value:""},"Select a category",-1)),(i(!0),n(F,null,U(s(w),o=>(i(),n("option",{key:o.id,value:o.id},x(o.name),9,J))),128))],512),[[V,s(r).categoryId]])])]),t("div",K,[e[25]||(e[25]=t("h2",{class:"text-lg font-medium text-gray-900"},"Product Details",-1)),t("div",Q,[t("div",null,[e[21]||(e[21]=t("label",{for:"material",class:"block text-sm font-medium text-gray-700"},"Material",-1)),l(t("input",{id:"material","onUpdate:modelValue":e[5]||(e[5]=o=>s(r).material=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[p,s(r).material]])]),t("div",X,[e[22]||(e[22]=t("label",{for:"history",class:"block text-sm font-medium text-gray-700"},"History / Provenance",-1)),l(t("textarea",{id:"history","onUpdate:modelValue":e[6]||(e[6]=o=>s(r).history=o),rows:"3",placeholder:"Historical information about this item...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[p,s(r).history]])])]),t("div",Y,[t("div",Z,[l(t("input",{id:"isAvailable","onUpdate:modelValue":e[7]||(e[7]=o=>s(r).isAvailable=o),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[_,s(r).isAvailable]]),e[23]||(e[23]=t("label",{for:"isAvailable",class:"ml-2 block text-sm text-gray-900"}," Available for Purchase ",-1))]),t("div",ee,[l(t("input",{id:"isFeatured","onUpdate:modelValue":e[8]||(e[8]=o=>s(r).isFeatured=o),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[_,s(r).isFeatured]]),e[24]||(e[24]=t("label",{for:"isFeatured",class:"ml-2 block text-sm text-gray-900"}," Featured Product ",-1))])])]),t("div",te,[e[28]||(e[28]=t("h2",{class:"text-lg font-medium text-gray-900"},"Images",-1)),e[29]||(e[29]=t("p",{class:"text-sm text-gray-500 mb-3"},"Upload product images. The first image will be the main product image.",-1)),t("div",oe,[t("input",{type:"file",accept:"image/*",multiple:"",onChange:B,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 cursor-pointer"},null,32),t("p",se,x(s(r).images.length)+" image(s) added",1)]),s(r).images.length>0?(i(),n("div",re,[(i(!0),n(F,null,U(s(r).images,(o,m)=>(i(),n("div",{key:m,class:"relative group"},[t("img",{src:o,alt:`Product image ${m+1}`,class:R(["w-full h-32 object-cover rounded-lg border-2",m===0?"border-primary-500":"border-gray-200"])},null,10,ae),m===0?(i(),n("div",ie," Main ")):v("",!0),t("button",{type:"button",onClick:k=>I(m),class:"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[...e[26]||(e[26]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,le)]))),128))])):v("",!0),t("details",de,[e[27]||(e[27]=t("summary",{class:"text-sm text-gray-600 cursor-pointer hover:text-primary-600"},"Or add image URLs manually",-1)),t("div",ne,[l(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>T(f)?f.value=o:null),rows:"4",placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm font-mono text-xs"},null,512),[[p,s(f)]])])])]),t("div",me,[h(u,{to:"/admin/products",class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},{default:b(()=>[...e[30]||(e[30]=[C(" Cancel ",-1)])]),_:1}),t("button",{type:"submit",disabled:s(y),class:"inline-flex justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[s(y)?(i(),n("span",pe,"Creating...")):(i(),n("span",ce,"Create Product"))],8,ue)])],32)])]),_:1})}}});export{be as default};
